<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hyperkube.dev // SYSTEM_ROOT</title>
    
    <!-- Performance optimizations -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://text.pollinations.ai">
    <link rel="dns-prefetch" href="https://wttr.in">

    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600;700&family=Inter:wght@300;400;600;700&display=block" rel="stylesheet">
    
    <style>
        :root {
            --bg-black: #050505;
            --bg-blue-grey: #0e1116;
            --grid-size: 20px;
            --grid-color: rgba(34, 197, 94, 0.11);
            --terminal-green: #22c55e;
            --terminal-green-dim: rgba(34, 197, 94, 0.15);
            --text-main: #e5e5e5;
            --text-muted: #888;
            --border-color: #333;
            --panel-bg: #0d1117;
            --panel-header: #0d1117;
            --panel-border: #1c2230;
            --sidebar-bg: #0f1117;
            --sidebar-text: #c5c8d4;
            --sidebar-icon: #9da1ad;
            --sidebar-active-bg: #234722;
            --sidebar-active-text: #22c55e;
            --syn-comment: #7e97ac;
            --syn-keyword: #45c9f0;
            --syn-variable: #ffffff;
            --syn-property: #a880ff;
            --syn-string: #fcd76e;
            --syn-plain: #d8dee9;
            --syn-number: #f0a45b;
            --prompt-user: #22c55e;
            --prompt-cmd: #c5c8d4;
            --prompt-comment: #66c2ff;
            --blink-speed: 2s;
            --font-mono: 'Fira Code', monospace;
            --font-sans: 'Inter', sans-serif;
        }
        * { box-sizing: border-box; outline: none; }
        html { scroll-behavior: smooth; overflow-y: scroll; scrollbar-gutter: stable; overscroll-behavior-y: contain; font-size: clamp(15px, 0.9vw + 13px, 17px); }
        body { margin: 0; padding: 0; background: var(--bg-black) radial-gradient(var(--grid-color) 1px, transparent 1px); background-size: var(--grid-size) var(--grid-size); color: var(--text-main); font-family: var(--font-sans); overflow-x: hidden; }
        .section-wrapper { width: 100%; padding: 6rem 0; border-bottom: 1px solid #1a1a1a; background: radial-gradient(var(--grid-color) 1px, transparent 1px); background-size: var(--grid-size) var(--grid-size); }
        .bg-black { background-color: var(--bg-black); }
        .bg-blue { background-color: var(--bg-blue-grey); }
        .container { max-width: 1100px; margin: 0 auto; padding: 0 2rem; }
        .hero-wrapper .container { max-width: 1300px; }
        a { text-decoration: none; color: inherit; transition: color .2s; }
        a:hover, .nav-links span:hover, .nav-links a:hover { color: var(--terminal-green); }
        .green { color: var(--terminal-green); }

        /* ============================================
           NAVIGATION - MUST BE IDENTICAL ON ALL PAGES
           ============================================ */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 1.2rem 0;
            background: rgba(5, 5, 5, 0.95);
            backdrop-filter: blur(4px);
            border-bottom: 1px solid var(--border-color);
            z-index: 100;
            line-height: 1;
        }
        nav .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        .nav-inner {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
        }
        .logo {
            font-family: var(--font-mono);
            font-weight: 700;
            letter-spacing: -0.5px;
            color: var(--text-main);
        }
        .nav-links {
            display: flex;
            gap: 1.5rem;
            font-family: var(--font-mono);
            font-size: 0.85rem;
            color: var(--text-muted);
        }
        .nav-links a {
            transition: color 0.2s;
            color: var(--text-muted);
        }
        .nav-links a:hover {
            color: var(--terminal-green);
        }
        .nav-links span {
            cursor: pointer;
            transition: color 0.2s;
            color: var(--text-muted);
        }
        .nav-links span:hover {
            color: var(--terminal-green);
        }
        .nav-toggle {
            display: none;
            background: #0c0c0c;
            color: var(--text-main);
            border: 1px solid var(--border-color);
            width: 42px;
            height: 38px;
            padding: 0;
            border-radius: 8px;
            font-family: var(--font-mono);
            font-size: 0.9rem;
            cursor: pointer;
            transition: border-color 0.15s, color 0.15s, background 0.15s;
            align-items: center;
            justify-content: center;
        }
        .nav-toggle:hover { border-color: var(--terminal-green); color: var(--terminal-green); }
        .hamburger {
            width: 18px;
            height: 12px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .hamburger span {
            height: 2px;
            width: 100%;
            background: currentColor;
            border-radius: 2px;
        }
        .mobile-menu {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(5, 5, 5, 0.95);
            backdrop-filter: blur(6px);
            z-index: 120;
            padding: 90px 1.5rem 2rem 1.5rem;
        }
        .mobile-menu.open { display: block; }
        .mobile-menu ul { list-style: none; padding: 0; margin: 0; }
        .mobile-menu li { margin-bottom: 1rem; }
        .mobile-menu a {
            display: block;
            padding: 0.95rem 1rem;
            border: 1px solid #1a1a1a;
            border-radius: 10px;
            background: rgba(20, 20, 20, 0.85);
            color: var(--text-main);
            font-family: var(--font-mono);
        }
        .mobile-menu a:hover { border-color: var(--terminal-green); color: var(--terminal-green); }
        @media (max-width: 900px) {
            .nav-links { display: none; }
            .nav-toggle { display: inline-flex; }
        }
        /* ============================================ */
        .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem; }
        .section-title { font-family: var(--font-mono); font-size: 1.8rem; margin: 0; display: flex; align-items: center; gap: 10px; cursor: default; user-select: none; }
        .tab-box { background: #111; border: 1px solid #333; border-radius: 8px; padding: 4px; display: inline-flex; gap: 4px; flex-wrap: wrap; }
        .tab-btn { background: transparent; border: none; color: var(--text-muted); cursor: pointer; padding: 8px 16px; font-family: var(--font-mono); font-size: .85rem; border-radius: 6px; transition: all .2s; font-weight: 500; }
        .tab-btn:hover { color: var(--text-main); background: rgba(255,255,255,.05); }
        .tab-btn.active { color: var(--terminal-green); background: var(--terminal-green-dim); font-weight: 600; }
        .title-prefix { color: var(--terminal-green); font-weight: bold; display: inline-block; min-width: 35px; }
        .cursor-block { width: 2px; height: 1.2em; background: var(--terminal-green); animation: blink var(--blink-speed) step-end infinite; margin-left: 5px; display: inline-block; vertical-align: bottom; }
        @keyframes blink { 50% { opacity: 0; } }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .card-box { background: rgba(15,15,15,.6); border: 1px solid var(--border-color); border-top: 4px solid #333; padding: 2rem; transition: transform .2s, border-color .2s, box-shadow .2s; height: 100%; display: flex; flex-direction: column; cursor: pointer; }
        .card-box:hover { border-color: var(--terminal-green); border-top-color: var(--terminal-green); transform: translateY(-4px); box-shadow: 0 10px 30px rgba(34,197,94,.1); }
        .card-box h3 { font-family: var(--font-mono); margin: 0 0 1rem; font-size: 1.1rem; }
        .card-box p { color: var(--text-muted); font-size: .95rem; line-height: 1.7; margin: 0; flex-grow: 1; }
        .hero-wrapper { min-height: 100vh; display: flex; flex-direction: column; justify-content: center; padding: 100px 0 60px; }
        h1 { font-size: 3.5rem; line-height: 1.1; margin-bottom: 1.5rem; font-weight: 800; letter-spacing: -1px; }
        .hero-subtitle { color: var(--text-muted); font-size: 1.1rem; max-width: 600px; margin-bottom: 2rem; }
        
        /* --- TERMINAL FIX START (Strict Containment) --- */
        .terminal-window { 
            background: #0f0f0f; 
            border: 1px solid var(--border-color); 
            border-radius: 6px; 
            font-family: var(--font-mono); 
            box-shadow: 0 20px 50px rgba(0,0,0,.6); 
            display: flex; 
            flex-direction: column; 
            
            /* CSS CONTAINMENT: Forces browser to respect size regardless of content */
            contain: size layout; 
            
            /* STRICT DIMENSIONS */
            height: 400px !important; 
            min-height: 400px !important; 
            max-height: 400px !important; 
            
            /* FLEX PARENT LOCK: Prevent external flex containers from resizing this */
            flex: 0 0 400px !important;
            
            width: 100%; 
            max-width: none; 
            overflow: hidden !important; 
            margin-top: 3rem; 
            position: relative; 
        }
        
        .terminal-bar { 
            background: #1a1a1a; 
            padding: 10px 15px; 
            display: flex; 
            gap: 8px; 
            align-items: center; 
            border-bottom: 1px solid var(--border-color); 
            flex-shrink: 0; 
            height: 42px; 
        }
        
        .dot { width: 12px; height: 12px; border-radius: 50%; }
        .red { background: #ff5f56; }
        .yellow { background: #ffbd2e; }
        .green-dot { background: #27c93f; }
        
        .terminal-body {
            padding: 15px;

            /* SCROLL & FLEX LOGIC */
            flex: 1 1 0;      /* grow:1, shrink:1, basis:0 (Key for scrolling) */
            height: 0;        /* Fallback for older browsers to force scroll calc */
            min-height: 0;    /* Allow shrinking below content size */

            overflow-y: auto !important;
            overflow-x: hidden !important;
            color: #ccc;
            font-size: .9rem;
            word-break: break-word;
            overflow-wrap: anywhere;
            position: relative;
            cursor: default;
        }
        /* --- TERMINAL FIX END --- */

        .prompt-command { color: var(--terminal-green); }
        #term-current-line { flex-wrap: wrap; align-items: center; gap: 8px; }
        #term-current-line .prompt-command { flex-shrink: 0; }
        #term-current-line .term-input { flex: 1; min-width: 0; }
        /* Start the hero terminal at 1.5x the container width while keeping it centered */
        .hero-wrapper .terminal-window { width: 150%; max-width: 150%; margin-left: -25%; margin-right: -25%; }
        .prompt-cursor { margin-left: 6px; height: 1em; }
        .terminal-body > div { white-space: pre-wrap; word-break: break-word; overflow-wrap: anywhere; max-width: 100%; }
        #term-display { height: 100%; max-height: 100%; overflow-y: auto; overflow-x: hidden; }
        
        .term-input {
            background: transparent; border: none;
            color: var(--terminal-green);
            font-family: inherit; font-size: inherit; flex: 1;
            margin-left: 8px; caret-color: var(--terminal-green);
            cursor: default;
        }
        
        .about-intro { font-family: var(--font-mono); color: var(--text-main); margin-bottom: 3rem; max-width: 700px; }
        .comment-line { color: var(--syn-comment); }
        .grid-3 { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; }
        .skills-wrapper { display: flex; gap: 20px; font-family: var(--font-mono); min-height: 450px; align-items: stretch; }
        .skills-sidebar { width: 260px; background: var(--sidebar-bg); border: 1px solid var(--panel-border); border-radius: 8px; display: flex; flex-direction: column; flex-shrink: 0; box-shadow: 0 10px 30px rgba(0,0,0,.5); }
        .skill-picker { display: none; width: 100%; margin-bottom: 1rem; }
        .skill-select {
            width: 100%;
            background: #0e0e0e;
            border: 1px solid #333;
            color: var(--text-main);
            padding: 0.85rem 0.9rem;
            font-family: var(--font-mono);
            border-radius: 8px;
            font-size: 0.95rem;
        }
        .panel-header { height: 40px; background: var(--panel-header); border-bottom: 1px solid rgba(255,255,255,.05); display: flex; align-items: center; padding: 0 15px; gap: 8px; flex-shrink: 0; }
        .sidebar-title { margin: 0 auto; font-size: .8rem; color: var(--sidebar-text); opacity: .7; }
        .sidebar-content { padding: 10px 0; flex: 1; }
        .file-item { padding: 10px 20px; cursor: pointer; color: var(--sidebar-text); display: flex; align-items: center; gap: 12px; font-size: .85rem; border-left: 2px solid transparent; transition: all .2s; margin-bottom: 2px; }
        .file-item svg { width: 16px; height: 16px; color: var(--sidebar-icon); transition: .2s; }
        .file-item:hover { color: var(--text-main); background: rgba(255,255,255,.03); }
        .file-item.active { background: var(--sidebar-active-bg); color: var(--sidebar-active-text); border-left-color: var(--sidebar-active-text); }
        .file-item.active svg { stroke: var(--sidebar-active-text); }
        .skills-code-window { flex: 1; background: var(--panel-bg); border: 1px solid var(--panel-border); border-radius: 8px; display: flex; flex-direction: column; box-shadow: 0 10px 30px rgba(0,0,0,.5); min-width: 0; }
        .code-path { display: flex; align-items: center; gap: 8px; font-size: .85rem; color: var(--text-muted); }
        .code-content { padding: 25px; flex: 1; font-size: .95rem; line-height: 1.6; color: var(--syn-plain); }
        .prompt-line { margin-bottom: 15px; }
        .p-user, .p-path { color: var(--prompt-user); }
        .p-cmd { color: var(--prompt-cmd); }
        .s-c { color: var(--syn-comment); font-style: italic; }
        .s-k { color: var(--syn-keyword); }
        .s-v { color: var(--syn-variable); }
        .s-s { color: var(--syn-string); }
        .s-p { color: var(--syn-property); }
        .s-plain { color: var(--syn-plain); }
        .tech-stack-tags { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 1.5rem; }
        .tag { font-size: .7rem; font-family: var(--font-mono); background: #222; padding: 4px 8px; border-radius: 4px; color: var(--text-muted); }
        .view-all-btn { display: inline-block; margin-top: 1.5rem; font-family: var(--font-mono); font-size: .9rem; color: var(--terminal-green); border-bottom: 1px solid transparent; }
        .view-all-btn:hover { border-bottom-color: var(--terminal-green); }
        .contact-wrapper { max-width: 600px; margin: 0 auto; background: #0a0a0a; border: 1px solid var(--border-color); padding: 2rem; border-radius: 4px; }
        .contact-intro { margin: 0 0 0.75rem; color: var(--text-muted); font-family: var(--font-mono); font-size: 0.95rem; line-height: 1.5; }
        .contact-social { display: flex; gap: 0.75rem; margin: 0 0 1.25rem; }
        .contact-social a {
            width: 38px;
            height: 38px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #333;
            border-radius: 8px;
            background: #0e0e0e;
            color: var(--text-muted);
            transition: border-color 0.2s, color 0.2s, transform 0.2s;
        }
        .contact-social a:hover { border-color: var(--terminal-green); color: var(--terminal-green); transform: translateY(-1px); }
        .contact-social svg { width: 18px; height: 18px; display: block; }
        .tui-input { width: 100%; background: #111; border: 1px solid #333; color: var(--text-main); padding: 10px 15px; font-family: var(--font-mono); font-size: .9rem; transition: border-color .2s; }
        .tui-input:focus { border-color: var(--terminal-green); }
        .tui-btn { background: var(--text-main); color: #000; border: none; padding: 12px 25px; font-family: var(--font-mono); font-weight: bold; cursor: pointer; width: 100%; transition: background .2s; }
        .tui-btn:hover { background: var(--terminal-green); }
        @media (max-width: 768px) {
            .skills-wrapper { flex-direction: column; }
            .skills-sidebar { display: none; }
            .skill-picker { display: block; }
            .skills-code-window { width: 100%; }
            h1 { font-size: 2.35rem; }
            .section-header { flex-direction: column; align-items: flex-start; gap: 1rem; }
            .hero-wrapper .terminal-window { width: 100%; max-width: 100%; margin-left: 0; margin-right: 0; }
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.78);
            backdrop-filter: blur(1.5px);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            transition: opacity 50ms ease-out, backdrop-filter 70ms ease-out;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
        }

        .modal-content {
            background: #0a0a0a;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            transform: translateY(3px);
            opacity: 0;
            transition: transform 50ms ease-out, opacity 50ms ease-out, box-shadow 80ms ease-out;
            will-change: transform, opacity;
        }

        .modal-overlay.active .modal-content {
            transform: translateY(0);
            opacity: 1;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            background: #0d0d0d;
            border-bottom: 1px solid var(--border-color);
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-family: var(--font-mono);
            font-size: 1.3rem;
            margin: 0;
            color: var(--text-main);
        }

        .modal-close {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-muted);
            width: 32px;
            height: 32px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            font-family: var(--font-mono);
        }

        .modal-close:hover {
            border-color: var(--terminal-green);
            color: var(--terminal-green);
            background: rgba(34, 197, 94, 0.1);
        }

        .modal-body {
            padding: 2rem;
        }

        .modal-summary {
            color: var(--text-main);
            font-family: var(--font-mono);
            font-size: 0.95rem;
            margin: 0 0 1rem 0;
            line-height: 1.6;
        }

        .modal-description {
            color: var(--text-muted);
            line-height: 1.7;
            font-size: 1rem;
            margin: 0 0 1.5rem 0;
        }

        .modal-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 2rem;
        }

        .modal-footer {
            padding: 0 2rem 2rem 2rem;
            display: flex;
            justify-content: flex-end;
        }

        .modal-btn {
            background: var(--terminal-green);
            color: #000;
            border: none;
            padding: 8px 20px;
            font-family: var(--font-mono);
            font-weight: 600;
            font-size: 0.8rem;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.2s;
            text-decoration: none;
            display: inline-block;
        }

        .modal-btn:hover {
            background: #1ea34b;
            color: #fff !important;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(34, 197, 94, 0.4);
        }

        @media (max-width: 768px) {
            .modal-content {
                max-width: 100%;
                max-height: 90vh;
            }
            .modal-header {
                padding: 1rem 1.5rem;
            }
            .modal-body {
                padding: 1.5rem;
            }
            .modal-footer {
                padding: 0 1.5rem 1.5rem 1.5rem;
            }
        }
    </style>
</head>
<body>

    <nav>
        <div class="container nav-inner">
            <a href="index.html" class="logo">hyperkube<span class="green">.dev</span></a>
            <div class="nav-links">
                <a href="index.html" onmouseenter="handleNavEnter(this)" onmouseleave="handleNavLeave(this)"><span class="nav-prefix">//</span> Terminal</a>
                <a href="post.html?id=about" onmouseenter="handleNavEnter(this)" onmouseleave="handleNavLeave(this)"><span class="nav-prefix">//</span> About</a>
                <a href="projects-blog.html" onmouseenter="handleNavEnter(this)" onmouseleave="handleNavLeave(this)"><span class="nav-prefix">//</span> Projects</a>
                <a href="blog.html" onmouseenter="handleNavEnter(this)" onmouseleave="handleNavLeave(this)"><span class="nav-prefix">//</span> Publications</a>
                <a href="index.html#skills" onmouseenter="handleNavEnter(this)" onmouseleave="handleNavLeave(this)"><span class="nav-prefix">//</span> Skills</a>
                <a href="index.html#contact" onmouseenter="handleNavEnter(this)" onmouseleave="handleNavLeave(this)"><span class="nav-prefix">//</span> Contact</a>
            </div>
            <button class="nav-toggle" id="nav-toggle" aria-label="Open menu" aria-expanded="false">
                <span class="hamburger" aria-hidden="true"><span></span><span></span><span></span></span>
            </button>
        </div>
    </nav>

    <div class="mobile-menu" id="mobile-menu">
        <ul>
            <li><a href="index.html">Terminal</a></li>
            <li><a href="post.html?id=about">About</a></li>
            <li><a href="projects-blog.html">Projects</a></li>
            <li><a href="blog.html">Publications</a></li>
            <li><a href="index.html#skills">Skills</a></li>
            <li><a href="index.html#contact">Contact</a></li>
        </ul>
    </div>

    <section class="section-wrapper bg-black hero-wrapper">
        <div class="container">
            <h1>Applied AI Scientist</h1>
            <p class="hero-subtitle">
                Specializing in high-frequency trading microstructure modeling, quantitative optimization, and fully autonomous, LLM-augmented trading systems.
            </p>

            <div class="terminal-window" onclick="focusTerminal()">
                <div class="terminal-bar">
                    <div class="dot red"></div><div class="dot yellow"></div><div class="dot green-dot"></div>
                </div>
                <div class="terminal-body" id="term-display">
                    <div id="boot-log"></div>
                    <div style="display:flex" id="term-current-line">
                        <span class="prompt-command">[guest@hyperkube.dev ~]$</span>
                        <input type="text" id="playground-input" class="term-input" autocomplete="off">
                    </div>
                </div>
            </div>

        </div>
    </section>

    <section id="explorer" class="section-wrapper bg-blue">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title" onmouseenter="handleTitleEnter(this)" onmouseleave="handleTitleLeave(this)">
                    <span class="title-prefix">//</span> <span id="explorer-title">About Me</span> <span class="cursor-block"></span>
                </h2>

                <div class="tab-box">
                    <button class="tab-btn active" data-tab="about" onclick="switchTab('about')">About Me</button>
                    <button class="tab-btn" data-tab="projects" onclick="switchTab('projects')">Projects</button>
                    <button class="tab-btn" data-tab="articles" onclick="switchTab('articles')">Publications</button>
                </div>
            </div>

            <div id="tab-about" class="tab-content active">
                <div class="about-intro">
                    <div class="about-text">
                       Hi, I'm a former environmental scientist turned fintech researcher who occasionally jumps out of planes and always says yes to good pastries & souvlaki.
                    </div>
                </div>

                <div class="grid-3">
                    <div class="card-box"><h3>AI & Fintech Research</h3><p>Agents, risk/scoring models, LLM evals.</p></div>
                    <div class="card-box"><h3>Quantitative Systems</h3><p>Time-series pipelines, backtests, analytics APIs.</p></div>
                    <div class="card-box"><h3>HFT Infrastructure</h3><p>Order-book pipelines, execution logic, microstructure tooling.</p></div>
                </div>

                <div style="text-align: right;">
                    <a href="post.html?id=about" class="view-all-btn">READ_FULL_STORY -></a>
                </div>
            </div>

            <div id="tab-projects" class="tab-content">
                <div class="grid-3" id="projects-grid">
                    <!-- Projects pre-rendered for instant display -->
                    <div class="card-box" data-popup="explainable-ai" onclick="openProjectPopup('explainable-ai', this)">
                        <h3>Explainable AI Platform</h3>
                        <p>ML models that actually explain their reasoning out loud.</p>
                        <div class="tech-stack-tags"><span class="tag">#XAI</span><span class="tag">#Python</span></div>
                    </div>
                    <div class="card-box" data-popup="portfolio-tracker" onclick="openProjectPopup('portfolio-tracker', this)">
                        <h3>Portfolio Tracker</h3>
                        <p>Translates IBKR chaos into clean rebalancing math.</p>
                        <div class="tech-stack-tags"><span class="tag">#Python</span><span class="tag">#QuantFinance</span></div>
                    </div>
                    <div class="card-box" data-popup="energy-market-forecasting" onclick="openProjectPopup('energy-market-forecasting', this)">
                        <h3>Energy Market Forecasting</h3>
                        <p>Predicts energy prices so bids aren't pure vibes.</p>
                        <div class="tech-stack-tags"><span class="tag">#Python</span><span class="tag">#QuantEnergy</span></div>
                    </div>
                    <div class="card-box" data-popup="goal-tracker" onclick="openProjectPopup('goal-tracker', this)">
                        <h3>Goal Tracker</h3>
                        <p>Connects today's boring tasks to your big yearly goals.</p>
                        <div class="tech-stack-tags"><span class="tag">#React</span><span class="tag">#Python</span></div>
                    </div>
                    <div class="card-box" data-popup="cost-of-living-scraper" onclick="openProjectPopup('cost-of-living-scraper', this)">
                        <h3>Cost of Living Scraper</h3>
                        <p>Turns relocation fantasies into actual expense spreadsheets.</p>
                        <div class="tech-stack-tags"><span class="tag">#WebScraping</span><span class="tag">#Python</span></div>
                    </div>
                    <div class="card-box" data-popup="ai-resume-tailor" onclick="openProjectPopup('ai-resume-tailor', this)">
                        <h3>AI Resume Tailor</h3>
                        <p>Rewrites your resume for each job without lying.</p>
                        <div class="tech-stack-tags"><span class="tag">#AI</span><span class="tag">#GeminiAPI</span></div>
                    </div>
                </div>
                <div style="text-align: right;">
                    <a href="projects-blog.html" class="view-all-btn">VIEW_ALL_PROJECTS -></a>
                </div>
            </div>

            <div id="tab-articles" class="tab-content">
                <div class="grid-3" id="articles-grid">
                    <a class="card-box" href="post.html?id=social-life-of-stocks" data-popup="social-life-of-stocks" onclick="openPublicationPopup('social-life-of-stocks', event, this)">
                        <h3>The Social Life of Stocks</h3>
                        <p>Repairing portfolios with covariance-aware projection so correlation actually matters.</p>
                        <div class="tech-stack-tags"><span class="tag">#investing</span><span class="tag">#risk</span></div>
                    </a>
                    <a class="card-box" href="post.html?id=tale-two-florida-cities" data-popup="tale-two-florida-cities" onclick="openPublicationPopup('tale-two-florida-cities', event, this)">
                        <h3>Flood risk perceptions in Florida cities</h3>
                        <p>Florida cities pick lifeboats: sandbags or denial.</p>
                        <div class="tech-stack-tags"><span class="tag">#flooding</span><span class="tag">#adaptation</span></div>
                    </a>
                    <a class="card-box" href="post.html?id=demand-response-ottawa" data-popup="demand-response-ottawa" onclick="openPublicationPopup('demand-response-ottawa', event, this)">
                        <h3>Residential demand response in Ottawa</h3>
                        <p>Paychecks made Ottawa ACs nap on cue.</p>
                        <div class="tech-stack-tags"><span class="tag">#demand-response</span><span class="tag">#energy</span></div>
                    </a>
                </div>
                <div style="text-align: right;">
                    <a href="blog.html" class="view-all-btn">VIEW_ALL_PUBLICATIONS -></a>
                </div>
            </div>
        </div>
    </section>

    <section id="skills" class="section-wrapper bg-black">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title" onmouseenter="handleTitleEnter(this)" onmouseleave="handleTitleLeave(this)">
                    <span class="title-prefix">//</span> Tech Stack <span class="cursor-block"></span>
                </h2>
            </div>

            <div class="skill-picker">
                <select class="skill-select" id="skill-picker">
                    <option value="backend">Backend</option>
                    <option value="ai">AI &amp; Machine Learning</option>
                    <option value="cloud">Cloud, DevOps &amp; DBs</option>
                    <option value="frontend">Frontend &amp; Extensions</option>
                    <option value="automation">Automation &amp; Scripting</option>
                    <option value="tools">Tools</option>
                </select>
            </div>
            
            <div class="skills-wrapper">
                
                <div class="skills-sidebar">
                    <div class="panel-header">
                        <div class="dot red"></div><div class="dot yellow"></div><div class="dot green-dot"></div>
                        <span class="sidebar-title">explorer.sh</span>
                    </div>
                    <div class="sidebar-content">
                        <div class="file-item active" onclick="renderSkill('backend', this)">
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
                            </svg>
                            <span>Backend</span>
                        </div>
                        
                        <div class="file-item" onclick="renderSkill('ai', this)">
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" />
                            </svg>
                            <span>AI & Machine Learning</span>
                        </div>

                        <div class="file-item" onclick="renderSkill('cloud', this)">
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" />
                            </svg>
                            <span>Cloud, DevOps & DBs</span>
                        </div>

                        <div class="file-item" onclick="renderSkill('frontend', this)">
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16m-7 6h7" />
                            </svg>
                            <span>Frontend & Extensions</span>
                        </div>

                        <div class="file-item" onclick="renderSkill('automation', this)">
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4 5h16v14H4z" />
                                <path stroke-linecap="round" stroke-linejoin="round" d="M7 9l3 3-3 3" />
                                <path stroke-linecap="round" stroke-linejoin="round" d="M13 15h4" />
                            </svg>
                            <span>Automation & Scripting</span>
                        </div>

                        <div class="file-item" onclick="renderSkill('tools', this)">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"></path>
                                <path d="m9 12 2 2 4-4"></path>
                            </svg>
                            <span>Tools</span>
                        </div>
                    </div>
                </div>

                <div class="skills-code-window">
                    <div class="panel-header" style="justify-content: space-between; padding: 0 20px;">
                        <div class="code-path">
                            <span id="skill-icon" aria-hidden="true">
                                <svg width="14" height="14" fill="none" viewBox="0 0 24 24" stroke="#22c55e" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
                                </svg>
                            </span>
                            <span id="file-path-display">~/skills/backend.json</span>
                        </div>
                        <div style="font-size: 0.75rem; color: #888; opacity:0.6">bash</div>
                    </div>
                    
                    <div class="code-content" id="skill-output">
                        </div>
                </div>

            </div>
        </div>
    </section>

    <section id="contact" class="section-wrapper bg-blue">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title" onmouseenter="handleTitleEnter(this)" onmouseleave="handleTitleLeave(this)">
                    <span class="title-prefix">//</span> Contact <span class="cursor-block"></span>
                </h2>
            </div>
            <div class="contact-wrapper">
                <p class="contact-intro">Say hi. Worst case: you get a polite reply. Best case: we build something weird and useful.</p>
                <div class="contact-social" aria-label="Social links">
                    <a href="https://github.com/nikolaosJP" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
                        <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                            <path d="M12 .5C5.73.5.75 5.7.75 12.14c0 5.16 3.35 9.53 8 11.07.59.11.8-.26.8-.58 0-.29-.01-1.05-.02-2.06-3.26.73-3.95-1.61-3.95-1.61-.53-1.39-1.3-1.76-1.3-1.76-1.06-.75.08-.74.08-.74 1.17.08 1.79 1.24 1.79 1.24 1.04 1.83 2.73 1.3 3.4.99.1-.77.4-1.3.73-1.6-2.6-.3-5.34-1.34-5.34-5.98 0-1.32.45-2.4 1.2-3.25-.12-.3-.52-1.52.12-3.17 0 0 .98-.32 3.2 1.24.93-.26 1.93-.39 2.92-.4.99.01 1.99.14 2.92.4 2.22-1.56 3.2-1.24 3.2-1.24.64 1.65.24 2.87.12 3.17.75.85 1.2 1.93 1.2 3.25 0 4.65-2.74 5.68-5.35 5.98.41.37.78 1.1.78 2.22 0 1.6-.02 2.88-.02 3.27 0 .32.21.69.81.58 4.65-1.54 8-5.91 8-11.07C23.25 5.7 18.27.5 12 .5z"/>
                        </svg>
                    </a>
                    <a href="https://www.linkedin.com/in/nickiliopoulos" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">
                        <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                            <path d="M4.98 3.5C4.98 4.88 3.87 6 2.5 6S0 4.88 0 3.5 1.11 1 2.48 1s2.5 1.12 2.5 2.5ZM.5 8.25H4.5V23.5H.5V8.25ZM8.25 8.25H12.08V10.33h.05c.53-.95 1.83-1.95 3.77-1.95 4.03 0 4.78 2.65 4.78 6.1v9.02h-4V15.5c0-1.9-.03-4.35-2.65-4.35-2.65 0-3.06 2.07-3.06 4.22v8.13h-4V8.25Z"/>
                        </svg>
                    </a>
                </div>
                <form id="contact-form" data-endpoint-encoded="aHR0cHM6Ly9mb3Jtc3ByZWUuaW8vZi9teXpycXlrYg==" method="POST" onsubmit="sendEmail(event)">
                    <div style="position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden;">
                        <label for="bot-field">Leave this field empty</label>
                        <input type="text" id="bot-field" name="bot-field" tabindex="-1" autocomplete="off">
                    </div>
                    <input type="text" id="contact-name" name="name" class="tui-input" placeholder="NAME" style="margin-bottom:1rem" required>
                    <input type="email" id="contact-email" name="email" class="tui-input" placeholder="EMAIL" style="margin-bottom:1rem" required>
                    <textarea class="tui-input" id="contact-message" name="message" rows="5" placeholder="MESSAGE" style="margin-bottom:1rem" required></textarea>
                    <button class="tui-btn">SEND</button>
                </form>
                <div id="contact-status" style="margin-top:0.75rem; font-family: var(--font-mono); font-size: 0.9rem; color: var(--text-muted);"></div>
            </div>
        </div>
    </section>

    <footer><div class="container" style="text-align: center; padding: 2rem; color: #666; font-family: var(--font-mono); font-size: 0.8rem;">echo "© 2025 hyperkube.dev"</div></footer>

    <!-- Modal Structure -->
    <div class="modal-overlay" id="modal-overlay" onclick="closeModal(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2 class="modal-title" id="modal-title"></h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p class="modal-summary" id="modal-summary"></p>
                <p class="modal-description" id="modal-description"></p>
                <div class="modal-tags" id="modal-tags"></div>
            </div>
            <div class="modal-footer">
                <a href="#" class="modal-btn" id="modal-btn">Read More →</a>
            </div>
        </div>
    </div>

    <script src="games/registry.js" defer></script>
    <script src="games/zork/jszm.js" defer></script>
    <script src="js/llm.js" defer></script>
    <script src="games/zork/zork.js" defer></script>
    <script src="games/zork/terminal-adapter.js" defer></script>
    <script src="games/riddles/riddles.js" defer></script>
    <script src="js/terminal.js" defer></script>

    <script>
        const chars = ['>', '#', '*', '_', '!', '?', '$', '/', ':', '+'];
        const charsLen = chars.length;

        // Optimized: Cache prefix elements and avoid repeated DOM queries
        const prefixCache = new WeakMap();

        function getPrefix(el, className) {
            if (!prefixCache.has(el)) {
                prefixCache.set(el, el.querySelector(className));
            }
            return prefixCache.get(el);
        }

        function handleTitleEnter(el) {
            const span = getPrefix(el, '.title-prefix');
            if (span) span.textContent = chars[~~(Math.random() * charsLen)] + chars[~~(Math.random() * charsLen)];
        }
        function handleTitleLeave(el) {
            const span = getPrefix(el, '.title-prefix');
            if (span) span.textContent = "//";
        }
        function handleNavEnter(el) {
            const span = getPrefix(el, '.nav-prefix');
            if (span) span.textContent = chars[~~(Math.random() * charsLen)] + chars[~~(Math.random() * charsLen)];
        }
        function handleNavLeave(el) {
            const span = getPrefix(el, '.nav-prefix');
            if (span) span.textContent = "//";
        }
        window.handleTitleEnter = handleTitleEnter;
        window.handleTitleLeave = handleTitleLeave;
        window.handleNavEnter = handleNavEnter;
        window.handleNavLeave = handleNavLeave;

        // Mobile nav toggle
        (function setupMobileMenu() {
            const toggle = document.getElementById('nav-toggle');
            const menu = document.getElementById('mobile-menu');
            if (!toggle || !menu) return;
            const closeMenu = () => {
                menu.classList.remove('open');
                toggle.setAttribute('aria-expanded', 'false');
            };
            toggle.addEventListener('click', () => {
                menu.classList.toggle('open');
                toggle.setAttribute('aria-expanded', menu.classList.contains('open') ? 'true' : 'false');
            });
            menu.addEventListener('click', (e) => {
                if (e.target.tagName === 'A') closeMenu();
            });
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') closeMenu();
            });
        })();

        const skills = {
            backend: { file: "backend.json", icon: `<svg width="14" height="14" fill="none" viewBox="0 0 24 24" stroke="#22c55e" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" /></svg>`, content: `<span class="s-c">/* Data-first services for quant and AI workloads. */</span>

<span class="s-k">const</span> <span class="s-v">backend</span> <span class="s-plain">=</span> <span class="s-plain">{</span>
  <span class="s-p">name</span>: <span class="s-s">"Backend"</span>,
  <span class="s-p">skills</span>: <span class="s-plain">[</span>
    <span class="s-s">"Python"</span>,
    <span class="s-s">"Rust"</span>,
    <span class="s-s">"R"</span>,
    <span class="s-s">"TypeScript"</span>
  <span class="s-plain">]</span>
<span class="s-plain">}</span>;` },

            ai: { file: "ai.json", icon: `<svg width="14" height="14" fill="none" viewBox="0 0 24 24" stroke="#22c55e" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>`, content: `<span class="s-c">/* From agents to recsys to forecasting—AI that ships. */</span>

<span class="s-k">const</span> <span class="s-v">aiMl</span> <span class="s-plain">=</span> <span class="s-plain">{</span>
  <span class="s-p">name</span>: <span class="s-s">"AI & Machine Learning"</span>,
  <span class="s-p">skills</span>: <span class="s-plain">[</span>
    <span class="s-s">"LangChain / LlamaIndex"</span>,
    <span class="s-s">"vLLM / TGI hosting"</span>,
    <span class="s-s">"Hybrid RAG & rerankers"</span>,
    <span class="s-s">"LLM evals & guardrails"</span>,
    <span class="s-s">"Recommendation systems"</span>,
    <span class="s-s">"Time-series forecasting"</span>,
    <span class="s-s">"Anomaly detection"</span>
  <span class="s-plain">]</span>
<span class="s-plain">}</span>;` },

            cloud: { file: "cloud.json", icon: `<svg width="14" height="14" fill="none" viewBox="0 0 24 24" stroke="#22c55e" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" /></svg>`, content: `<span class="s-c">/* Infra, databases, and delivery. */</span>

<span class="s-k">const</span> <span class="s-v">cloudDevops</span> <span class="s-plain">=</span> <span class="s-plain">{</span>
  <span class="s-p">name</span>: <span class="s-s">"Cloud, DevOps & DBs"</span>,
  <span class="s-p">skills</span>: <span class="s-plain">[</span>
    <span class="s-s">"Docker & Compose"</span>,
    <span class="s-s">"GitHub Actions (CI/CD)"</span>,
    <span class="s-s">"AWS / DigitalOcean"</span>,
    <span class="s-s">"PostgreSQL"</span>,
    <span class="s-s">"Redis"</span>,
    <span class="s-s">"Kafka / Redpanda"</span>,
    <span class="s-s">"Grafana / Prometheus / OTel"</span>
  <span class="s-plain">]</span>
<span class="s-plain">}</span>;` },

            frontend: { file: "frontend.json", icon: `<svg width="14" height="14" fill="none" viewBox="0 0 24 24" stroke="#22c55e" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16m-7 6h7" /></svg>`, content: `<span class="s-c">/* Interfaces for ops and analytics. */</span>

<span class="s-k">const</span> <span class="s-v">frontend</span> <span class="s-plain">=</span> <span class="s-plain">{</span>
  <span class="s-p">name</span>: <span class="s-s">"Frontend & Extensions"</span>,
  <span class="s-p">skills</span>: <span class="s-plain">[</span>
    <span class="s-s">"React / Next.js"</span>,
    <span class="s-s">"Tailwind & design systems"</span>,
    <span class="s-s">"Data viz (ECharts/D3)"</span>,
    <span class="s-s">"HTML"</span>
  <span class="s-plain">]</span>
<span class="s-plain">}</span>;` },

            automation: { file: "automation.json", icon: `<svg width="14" height="14" fill="none" viewBox="0 0 24 24" stroke="#22c55e" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 5h16v14H4z" /><path stroke-linecap="round" stroke-linejoin="round" d="M7 9l3 3-3 3" /><path stroke-linecap="round" stroke-linejoin="round" d="M13 15h4" /></svg>`, content: `<span class="s-c">/* Glue code and system automation. */</span>

<span class="s-k">const</span> <span class="s-v">automation</span> <span class="s-plain">=</span> <span class="s-plain">{</span>
  <span class="s-p">name</span>: <span class="s-s">"Automation & Scripting"</span>,
  <span class="s-p">skills</span>: <span class="s-plain">[</span>
    <span class="s-s">"Bash"</span>,
    <span class="s-s">"Python scripting"</span>,
    <span class="s-s">"Headless browser automation"</span>
  <span class="s-plain">]</span>
<span class="s-plain">}</span>;` },

            tools: { file: "tools.json", icon: `<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#22c55e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"></path><path d="m9 12 2 2 4-4"></path></svg>`, content: `<span class="s-c">/* Daily drivers. */</span>

<span class="s-k">const</span> <span class="s-v">tools</span> <span class="s-plain">=</span> <span class="s-plain">{</span>
  <span class="s-p">name</span>: <span class="s-s">"Tools"</span>,
  <span class="s-p">skills</span>: <span class="s-plain">[</span>
    <span class="s-s">"VS Code / Neovim"</span>,
    <span class="s-s">"Linux / macOS"</span>,
    <span class="s-s">"Git & GitHub"</span>,
    <span class="s-s">"Docker Desktop"</span>,
    <span class="s-s">"Cursor / Claude Code"</span>
  <span class="s-plain">]</span>
<span class="s-plain">}</span>;` }
        };

        // Cache DOM elements for better performance
        const skillElements = {
            filePathDisplay: null,
            skillIcon: null,
            skillOutput: null,
            fileItems: null
        };

        function renderSkill(k, el) {
            // Lazy init cache
            if (!skillElements.filePathDisplay) {
                skillElements.filePathDisplay = document.getElementById('file-path-display');
                skillElements.skillIcon = document.getElementById('skill-icon');
                skillElements.skillOutput = document.getElementById('skill-output');
                skillElements.fileItems = document.querySelectorAll('.file-item');
                const picker = document.getElementById('skill-picker');
                if (picker) {
                    picker.addEventListener('change', (evt) => renderSkill(evt.target.value));
                }
            }

            if (el && skillElements.fileItems) {
                skillElements.fileItems.forEach(i => i.classList.remove('active'));
                el.classList.add('active');
            }

            const d = skills[k];
            if (skillElements.filePathDisplay) {
                skillElements.filePathDisplay.textContent = `~/skills/${d.file}`;
            }
            if (skillElements.skillIcon) {
                skillElements.skillIcon.innerHTML = d.icon || '';
            }
            if (skillElements.skillOutput) {
                skillElements.skillOutput.innerHTML = `<div class="prompt-line"><span class="p-user">hyperkube</span>:<span class="p-path">~/skills</span>$ <span class="p-cmd">cat ${d.file}</span></div><pre style="margin:0;font-family:inherit;white-space:pre-wrap">${d.content}</pre><div class="prompt-line"><span class="p-user">hyperkube</span>:<span class="p-path">~/skills</span>$_</div>`;
            }
        }
        window.renderSkill = renderSkill;
        renderSkill('backend');

        const tabs = { about: 'About Me', projects: 'Projects', articles: 'Publications' };

        // Cache tab elements for instant switching
        const tabElements = {
            contents: null,
            buttons: null,
            title: null
        };

        function switchTab(t) {
            // Lazy init cache
            if (!tabElements.contents) {
                tabElements.contents = document.querySelectorAll('.tab-content');
                tabElements.buttons = document.querySelectorAll('.tab-btn');
                tabElements.title = document.getElementById('explorer-title');
            }

            // Use cached elements for instant switching
            tabElements.contents.forEach(el => el.classList.remove('active'));
            tabElements.buttons.forEach(el => el.classList.toggle('active', el.dataset.tab === t));
            document.getElementById('tab-' + t).classList.add('active');

            if (tabElements.title && tabs[t]) {
                tabElements.title.textContent = tabs[t];
            }
        }
        function navigateToTab(t) {
            document.getElementById('explorer').scrollIntoView({ behavior: 'smooth' });
            switchTab(t);
        }
        window.switchTab = switchTab;
        window.navigateToTab = navigateToTab;

        // Popups are now pre-rendered in HTML for instant display - no JS needed!

        // Modal functions - Optimized with cached elements and DocumentFragment
        const modalElements = {
            overlay: null,
            title: null,
            summary: null,
            description: null,
            tags: null,
            btn: null
        };

        function openModal(title, content, tags, link) {
            // Lazy init cache
            if (!modalElements.overlay) {
                modalElements.overlay = document.getElementById('modal-overlay');
                modalElements.title = document.getElementById('modal-title');
                modalElements.summary = document.getElementById('modal-summary');
                modalElements.description = document.getElementById('modal-description');
                modalElements.tags = document.getElementById('modal-tags');
                modalElements.btn = document.getElementById('modal-btn');
            }

            modalElements.title.textContent = title;
            const summaryText = content?.summary || content?.card || content?.text || '';
            const bodyText = content?.body || content?.text || (typeof content === 'string' ? content : '') || '';
            const summaryToShow = summaryText || bodyText;
            const descriptionToShow = bodyText && bodyText !== summaryToShow ? bodyText : '';
            if (modalElements.summary) {
                modalElements.summary.textContent = summaryToShow;
                modalElements.summary.style.display = summaryToShow ? 'block' : 'none';
            }
            if (modalElements.description) {
                modalElements.description.textContent = descriptionToShow;
                modalElements.description.style.display = descriptionToShow ? 'block' : 'none';
            }

            // Optimized: Use DocumentFragment for batch tag insertion
            const fragment = document.createDocumentFragment();
            (Array.isArray(tags) ? tags : []).forEach(tag => {
                const tagEl = document.createElement('span');
                tagEl.className = 'tag';
                tagEl.textContent = tag;
                fragment.appendChild(tagEl);
            });

            modalElements.tags.innerHTML = '';
            modalElements.tags.appendChild(fragment);

            // Set the link for the button
            modalElements.btn.href = link;

            // Show modal
            modalElements.overlay.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal(event) {
            // Only close if clicking on overlay (not modal content) or close button
            if (!event || event.target.id === 'modal-overlay' || event.target.classList.contains('modal-close')) {
                const modal = document.getElementById('modal-overlay');
                modal.classList.remove('active');
                document.body.style.overflow = '';
            }
        }

        // Close modal on ESC
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeModal();
        });

        // Project popups sourced from JSON for modularity
        const projectPopupData = {};
        const projectPopupFiles = {
            'energy-market-forecasting': 'energy-market-forecasting',
            'explainable-ai': 'explainable-ai',
            'portfolio-tracker': 'portfolio-tracker',
            'ai-resume-tailor': 'ai-resume-tailor',
            'goal-tracker': 'goal-tracker',
            'cost-of-living-scraper': 'cost-of-living-scraper'
        };

        // Publication popups mirror project popup behavior
        const publicationPopupData = {};
        const publicationPopupFiles = {
            'tale-two-florida-cities': 'flood-risk-perceptions-florida',
            'demand-response-ottawa': 'demand-response-ottawa',
            'social-life-of-stocks': 'social-life-of-stocks'
        };

        function openProjectPopup(key, el) {
            const data = projectPopupData[key];
            if (data) {
                openModal(
                    data.title || data.cardTitle || '',
                    { summary: data.cardDescription || '', body: data.modalDescription || data.cardDescription || '' },
                    Array.isArray(data.tags) ? data.tags : [],
                    data.link || '#'
                );
                return;
            }
            // Fallback to element content if JSON not loaded yet
            if (el) {
                const title = el.querySelector('h3')?.textContent || '';
                const desc = el.querySelector('p')?.textContent || '';
                const tags = Array.from(el.querySelectorAll('.tag')).map(t => t.textContent);
                const link = el.getAttribute('href') || el?.dataset?.link || '#';
                openModal(title, { summary: desc, body: desc }, tags, link);
            }
        }

        function openPublicationPopup(key, event, el) {
            if (event) {
                if (event.metaKey || event.ctrlKey || event.shiftKey || event.button === 1) return; // allow new tab behavior
                event.preventDefault();
            }

            const data = publicationPopupData[key];
            if (data) {
                openModal(
                    data.title || data.cardTitle || '',
                    { summary: data.cardDescription || '', body: data.modalDescription || data.cardDescription || '' },
                    Array.isArray(data.tags) ? data.tags : [],
                    data.link || '#'
                );
                return;
            }

            if (el) {
                const title = el.querySelector('h3')?.textContent || '';
                const desc = el.querySelector('p')?.textContent || '';
                const tags = Array.from(el.querySelectorAll('.tag')).map(t => t.textContent);
                const link = el.getAttribute('href') || el?.dataset?.link || '#';
                openModal(title, { summary: desc, body: desc }, tags, link);
            }
        }

        async function loadProjectPopups() {
            const entries = Object.entries(projectPopupFiles);
            await Promise.all(entries.map(async ([key, file]) => {
                try {
                    const res = await fetch(`content/projects/popups/${file}.json`, { cache: 'no-cache' });
                    if (!res.ok) return;
                    const json = await res.json();
                    projectPopupData[key] = json;
                } catch (err) {
                    // ignore; fallback will use card content
                }
            }));
        }

        async function loadPublicationPopups() {
            const entries = Object.entries(publicationPopupFiles);
            await Promise.all(entries.map(async ([key, file]) => {
                try {
                    const res = await fetch(`content/publications/popups/${file}.json`, { cache: 'no-cache' });
                    if (!res.ok) return;
                    const json = await res.json();
                    publicationPopupData[key] = json;
                } catch (err) {
                    // ignore; fallback will use card content
                }
            }));
        }

        loadProjectPopups();
        loadPublicationPopups();

        async function sendEmail(event) {
            event.preventDefault();
            const form = document.getElementById('contact-form');
            const statusEl = document.getElementById('contact-status');
            const name = document.getElementById('contact-name')?.value.trim();
            const email = document.getElementById('contact-email')?.value.trim();
            const message = document.getElementById('contact-message')?.value.trim();
            const botField = document.getElementById('bot-field')?.value.trim();

            // basic honeypot
            if (botField) {
                return;
            }

            if (!name || !email || !message) {
                if (statusEl) {
                    statusEl.textContent = 'Please fill out name, email, and message.';
                    statusEl.style.color = '#f87171';
                }
                return;
            }

            // decode the endpoint at runtime to reduce static scraping
            const encoded = form.getAttribute('data-endpoint-encoded');
            const endpoint = encoded ? atob(encoded) : '';
            if (statusEl) {
                statusEl.textContent = 'Sending...';
                statusEl.style.color = '#22c55e';
            }

            try {
                const res = await fetch(endpoint, {
                    method: 'POST',
                    headers: { 'Accept': 'application/json' },
                    body: new FormData(form)
                });

                if (!res.ok) throw new Error('Send failed');

                if (statusEl) {
                    statusEl.textContent = 'Message sent!';
                    statusEl.style.color = '#22c55e';
                }
                form.reset();
            } catch (err) {
                console.error(err);
                if (statusEl) {
                    statusEl.textContent = 'Failed to send. Please try again or contact me directly at nikosiliopoulos@outlook.com.';
                    statusEl.style.color = '#f87171';
                }
            }
        }

    </script>
</body>
</html>
